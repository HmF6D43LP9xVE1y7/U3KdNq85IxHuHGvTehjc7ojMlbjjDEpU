// one array per project, 5 images each, colored
        const projectImages = {
            red: [
                "https://placehold.co/250x350/ff0000/ffffff?text=red+1",
                "https://placehold.co/350x250/ff0000/ffffff?text=red+2",
                "https://placehold.co/250x350/ff0000/ffffff?text=red+3",
                "https://placehold.co/350x250/ff0000/ffffff?text=red+4",
                "https://placehold.co/350x250/ff0000/ffffff?text=red+5"
            ],
            green: [
                "https://placehold.co/250x350/00ff00/000000?text=green+1",
                "https://placehold.co/350x250/00ff00/000000?text=green+2",
                "https://placehold.co/250x350/00ff00/000000?text=green+3",
                "https://placehold.co/250x350/00ff00/000000?text=green+4",
                "https://placehold.co/350x250/00ff00/000000?text=green+5"
            ],
            yellow: [
                "https://placehold.co/350x250/ffff00/000000?text=yellow+1",
                "https://placehold.co/250x350/ffff00/000000?text=yellow+2",
                "https://placehold.co/350x250/ffff00/000000?text=yellow+3",
                "https://placehold.co/350x250/ffff00/000000?text=yellow+4",
                "https://placehold.co/250x350/ffff00/000000?text=yellow+5"
            ]
        };

        const lb = document.querySelector(".lightbox");
        const lbSrc = document.querySelector(".lightboxSrc");
        const lbCount = document.querySelector(".lightboxCount");
        const lbClose = document.querySelector(".lightboxClose");
        const lbPrev = document.querySelector(".lightboxPrev");
        const lbNext = document.querySelector(".lightboxNext");

        let currentProject = null;
        let currentIndex = 0;

        function updateImage() {
            if (!currentProject) return;
            const arr = projectImages[currentProject];
            lbSrc.src = arr[currentIndex];
            lbCount.textContent = (currentIndex + 1) + " / " + arr.length;
        }

        function openLightbox(project, startIndex = 0) {
            currentProject = project;
            currentIndex = startIndex;
            updateImage();
            lb.style.display = "flex";
            document.body.style.overflow = "hidden";
            addEvents();
        }

        function closeLightbox() {
            lb.style.display = "none";
            lbSrc.src = "";
            document.body.style.overflow = "auto";
            removeEvents();
        }

        function prevImage() {
            const arr = projectImages[currentProject];
            currentIndex = (currentIndex - 1 + arr.length) % arr.length;
            updateImage();
        }

        function nextImage() {
            const arr = projectImages[currentProject];
            currentIndex = (currentIndex + 1) % arr.length;
            updateImage();
        }

        function handleKeydown(event) {
            switch (event.key) {
                case "ArrowLeft":
                    event.preventDefault();
                    prevImage();
                    break;
                case "ArrowRight":
                case " ":
                    event.preventDefault();
                    nextImage();
                    break;
                case "Escape":
                    event.preventDefault();
                    closeLightbox();
                    break;
            }
        }

        function handleClickOutside(e) {
            if (e.target === lb) closeLightbox();
        }

        const eventBindings = [
            { element: document, event: "keydown", handler: handleKeydown },
            { element: lbClose, event: "click", handler: closeLightbox },
            { element: lbPrev, event: "click", handler: prevImage },
            { element: lbNext, event: "click", handler: nextImage },
            { element: lb, event: "click", handler: handleClickOutside }
        ];

        function addEvents() {
            eventBindings.forEach(({element, event, handler}) => {
                element.addEventListener(event, handler);
            });
        }

        function removeEvents() {
            eventBindings.forEach(({element, event, handler}) => {
                element.removeEventListener(event, handler);
            });
        }

        document.querySelectorAll(".viewProject").forEach(link => {
            link.addEventListener("click", e => {
                e.preventDefault();
                const project = link.dataset.project;
                openLightbox(project, 0);
            });
        });